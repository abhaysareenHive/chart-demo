import yfinance as yf
import json

# Fetch last 10 days of daily AAPL data
data = yf.download('AAPL', period='10d', interval='1d')
data.reset_index(inplace=True)

ohlc = []
for i, row in data.iterrows():
    ohlc.append({
        'x': row['Date'].strftime('%Y-%m-%d'),
        'open': row['Open'],
        'high': row['High'],
        'low': row['Low'],
        'close': row['Close']
    })

# Save as JSON
with open('aapl_ohlc.json', 'w') as f:
    json.dump(ohlc, f)
